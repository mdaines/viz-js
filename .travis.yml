sudo: required

language: node_js

node_js:
  - node

services:
  - docker

before_install:
  - docker run -dit --name emscripten -v $(pwd):/src trzeci/emscripten:sdk-incoming-64bit bash

before_script:
  - python -m SimpleHTTPServer &
  - sleep 2

script:
  - docker exec -it emscripten make expat graphviz viz.js
  - node test-browser/runner --file full.html --file fabric.html --capabilities test-browser/all.json

addons:
  sauce_connect: true
